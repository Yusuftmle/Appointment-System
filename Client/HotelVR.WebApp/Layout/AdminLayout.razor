@using Microsoft.AspNetCore.Authorization
@inherits LayoutComponentBase
@attribute [Authorize(Roles = "Admin")] // Sadece Admin rolüne sahip kullanıcılar
<MudLayout>
    <AuthorizeView Roles="Admin">
    
    <MudAppBar Color="Color.Primary" Elevation="4" Fixed="true">
        <MudToolBar>
            <MudIconButton Icon="@Icons.Material.Filled.Menu" 
                          Color="Color.Inherit" 
                          Edge="Edge.Start"
                          OnClick="@ToggleDrawer" />
            <MudText Typo="Typo.h6" Class="ml-3">Admin Paneli</MudText>
            <MudSpacer />
            <MudIconButton Icon="@Icons.Material.Filled.Notifications" Color="Color.Inherit" />
            <MudAvatar Size="Size.Small" Color="Color.Secondary" Class="ml-3">AD</MudAvatar>
        </MudToolBar>
    </MudAppBar>

    <MudDrawer @bind-Open="_drawerOpen" Elevation="1" ClipMode="DrawerClipMode.Always" Variant="DrawerVariant.Responsive">
        <MudDrawerHeader>
            <MudText Typo="Typo.h6" Class="text-center">Yönetim</MudText>
        </MudDrawerHeader>
        <MudNavMenu Rounded="true" Dense="true">
            <MudNavLink Href="/admin" Icon="@Icons.Material.Filled.Dashboard" IconColor="Color.Primary">Dashboard</MudNavLink>
            <MudNavLink Href="/admin/blogs" Icon="@Icons.Material.Filled.Article" IconColor="Color.Primary">Bloglar</MudNavLink>
            <MudNavLink Href="/admin/appointments" Icon="@Icons.Material.Filled.Event" IconColor="Color.Primary">Randevular</MudNavLink>
                <MudNavLink Href="/admin/appointmentService" Icon="@Icons.Material.Filled.EventNote" IconColor="Color.Primary">Randevu hizmeti</MudNavLink>
                <MudNavLink Href="/admin/Users" Icon="@Icons.Material.Filled.VerifiedUser" IconColor="Color.Primary">Kullanicilar</MudNavLink>
        </MudNavMenu>
       
    </MudDrawer>

    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.False" Class="py-4 px-6">
            @Body
        </MudContainer>
    </MudMainContent>
    </AuthorizeView>
</MudLayout>

@code {
    private bool _drawerOpen = true;
    
    private void ToggleDrawer()
    {
        _drawerOpen = !_drawerOpen;
    }
}